#!/usr/bin/expect
# TODO(kaihowl) increase
set timeout 2

spawn zsh "-i";
expect "➜";

send "export _ZO_DATA_DIR=\$(pwd)\r"

expect "➜";

# Clear up input with ctrl-w
send "\x17";

# Flush buffer
expect "*"

# Clear up input with ctrl-w
send "\x17";

send "cdtmp\r"

expect "➜";

send "mkdir test; cd test; cd ..; mkdir other; cd other\r"

expect "➜";

send "j t**\t"

expect "/"

send "test"

expect "> test"

send "\r"
#
# expect "test"
#
# send "\r"
#
expect "➜";

send "\r";

expect "➜";

send "pwd\r"

expect "➜";

expect {
  "test" {}
  "*" { exit 1 }
}
